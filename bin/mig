#!/usr/bin/env php
<?php

require __DIR__.'/../vendor/autoload.php';

use Mig\Actions\EnsureMigrationsDirectoriesExists;
use Mig\Actions\EnsureMigrationsTablesExists;
use Mig\Commands\CreateMigrationCommand;
use Mig\Commands\MigrateCommand;
use Mig\Support\ProjectPath;
use Symfony\Component\Console\Application;

$dotenv = Dotenv\Dotenv::createImmutable(ProjectPath::get());
$dotenv->load();

new EnsureMigrationsDirectoriesExists()->execute();
new EnsureMigrationsTablesExists()->execute();

$application = new Application();

$application->addCommands([
    new CreateMigrationCommand(),
    new MigrateCommand(),
]);

$application->run();
